{%extends"base.html"%}

{%blocktitle%}RandevuYönetimi-DoğustanSosyal{%endblock%}
{%blockpage_title%}RandevuYönetimi{%endblock%}
{%blockpage_subtitle%}Randevutalepleriniyönetin{%endblock%}

{%blockextra_styles%}
<style>
.management-container{
display:grid;
gap:30px;
animation:fadeInUp0.6sease;
}

@keyframesfadeInUp{
from{opacity:0;transform:translateY(30px);}
to{opacity:1;transform:translateY(0);}
}

.section-box{
background:white;
padding:30px;
border-radius:20px;
box-shadow:04px20pxrgba(0,0,0,0.08);
}

.section-title{
font-size:22px;
font-weight:600;
color:#333;
margin-bottom:25px;
display:flex;
align-items:center;
gap:10px;
}

.pending-badge{
background:linear-gradient(135deg,#f39c120%,#e74c3c100%);
color:white;
padding:4px12px;
border-radius:20px;
font-size:14px;
font-weight:600;
}

.randevu-card{
background:linear-gradient(135deg,#e74c3c150%,#c0392b15100%);
padding:25px;
border-radius:15px;
margin-bottom:20px;
border-left:4pxsolid#e74c3c;
transition:all0.3s;
}

.randevu-card.pending{
border-left-color:#f39c12;
}

.randevu-card.approved{
border-left-color:#27ae60;
}

.randevu-card.rejected{
border-left-color:#e74c3c;
}

.randevu-header{
display:flex;
justify-content:space-between;
align-items:start;
margin-bottom:15px;
}

.student-info{
font-size:18px;
font-weight:600;
color:#333;
}

.randevu-status{
padding:6px14px;
border-radius:20px;
font-size:13px;
font-weight:600;
}

.status-bekliyor{
background:#fff3cd;
color:#856404;
}

.status-onaylandi{
background:#d4edda;
color:#155724;
}

.status-reddedildi{
background:#f8d7da;
color:#721c24;
}

.status-iptal{
background:#e0e0e0;
color:#666;
}

.randevu-details{
display:grid;
grid-template-columns:repeat(2,1fr);
gap:12px;
margin-bottom:15px;
font-size:14px;
color:#666;
}

.detail-item{
display:flex;
align-items:center;
gap:8px;
}

.detail-itemstrong{
color:#333;
}

.randevu-subject{
background:rgba(102,126,234,0.1);
padding:12px;
border-radius:10px;
margin-bottom:15px;
font-size:14px;
color:#333;
}

.randevu-description{
background:#f8f9fa;
padding:12px;
border-radius:10px;
margin-bottom:15px;
font-size:13px;
color:#666;
font-style:italic;
}

.action-buttons{
display:flex;
gap:10px;
}

.btn-approve,.btn-reject{
flex:1;
padding:12px;
border:none;
border-radius:10px;
font-size:14px;
font-weight:600;
cursor:pointer;
transition:all0.3s;
}

.btn-approve{
background:linear-gradient(135deg,#27ae600%,#229954100%);
color:white;
box-shadow:04px15pxrgba(39,174,96,0.3);
}

.btn-approve:hover{
transform:translateY(-2px);
box-shadow:06px20pxrgba(39,174,96,0.4);
}

.btn-reject{
background:linear-gradient(135deg,#e74c3c0%,#c0392b100%);
color:white;
box-shadow:04px15pxrgba(231,76,60,0.3);
}

.btn-reject:hover{
transform:translateY(-2px);
box-shadow:06px20pxrgba(231,76,60,0.4);
}

.empty-state{
text-align:center;
padding:60px40px;
color:#999;
}

.empty-state-icon{
font-size:64px;
margin-bottom:20px;
}

@media(max-width:768px){
.randevu-details{
grid-template-columns:1fr;
}
}
</style>
{%endblock%}

{%blockcontent%}
<divclass="management-container">
<!--BekleyenRandevular-->
<divclass="section-box">
<h2class="section-title">
BekleyenTalepler
{%ifbekleyen_randevular%}
<spanclass="pending-badge">{{bekleyen_randevular|length}}</span>
{%endif%}
</h2>

{%ifbekleyen_randevular%}
{%forrandevuinbekleyen_randevular%}
<divclass="randevu-cardpending">
<divclass="randevu-header">
<divclass="student-info">
{{randevu.ogrenci.get_full_name}}
<divstyle="font-size:13px;font-weight:400;color:#666;margin-top:4px;">
@{{randevu.ogrenci.username}}
</div>
</div>
<spanclass="randevu-statusstatus-bekliyor">Beklemede</span>
</div>

<divclass="randevu-details">
<divclass="detail-item">
<strong>Öğretmen:</strong>{{randevu.ogretmen.unvan}}{{randevu.ogretmen.kullanici.get_full_name}}
</div>
<divclass="detail-item">
<strong>Tarih:</strong>{{randevu.tarih|date:"dFY,l"}}
</div>
<divclass="detail-item">
<strong>Başlangıç:</strong>{{randevu.baslangic_saati|time:"H:i"}}
</div>
<divclass="detail-item">
<strong>Bitiş:</strong>{{randevu.bitis_saati|time:"H:i"}}
</div>
{%ifrandevu.ogretmen.ofis%}
<divclass="detail-item">
<strong>Ofis:</strong>{{randevu.ogretmen.ofis}}
</div>
{%endif%}
</div>

<divclass="randevu-subject">
<strong>Konu:</strong>{{randevu.konu}}
</div>

{%ifrandevu.aciklama%}
<divclass="randevu-description">
<strong>💬Açıklama:</strong>{{randevu.aciklama}}
</div>
{%endif%}

<divclass="action-buttons">
<formmethod="POST"action="{%url'randevu-yonetim'%}"style="flex:1;">
{%csrf_token%}
<inputtype="hidden"name="randevu_id"value="{{randevu.id}}">
<inputtype="hidden"name="action"value="onayla">
<buttontype="submit"class="btn-approve">✓Onayla</button>
</form>
<formmethod="POST"action="{%url'randevu-yonetim'%}"style="flex:1;">
{%csrf_token%}
<inputtype="hidden"name="randevu_id"value="{{randevu.id}}">
<inputtype="hidden"name="action"value="reddet">
<buttontype="submit"class="btn-reject"onclick="returnconfirm('Burandevuyureddetmekistediğinizeeminmisiniz?')">✗Reddet</button>
</form>
</div>
</div>
{%endfor%}
{%else%}
<divclass="empty-state">
<divclass="empty-state-icon">✅</div>
<h3style="font-size:20px;color:#333;margin-bottom:8px;">BekleyenTalepYok</h3>
<p>Tümrandevutalepleriişlenmişdurumda.</p>
</div>
{%endif%}
</div>

<!--TümRandevular-->
<divclass="section-box">
<h2class="section-title">TümRandevular</h2>

{%iftum_randevular%}
{%forrandevuintum_randevular%}
<divclass="randevu-card{%ifrandevu.durum=='bekliyor'%}pending{%elifrandevu.durum=='onaylandi'%}approved{%elifrandevu.durum=='reddedildi'%}rejected{%endif%}">
<divclass="randevu-header">
<divclass="student-info">
👤{{randevu.ogrenci.get_full_name}}
<divstyle="font-size:13px;font-weight:400;color:#666;margin-top:4px;">
@{{randevu.ogrenci.username}}
</div>
</div>
<spanclass="randevu-statusstatus-{{randevu.durum}}">
{%ifrandevu.durum=='onaylandi'%}✓Onaylandı
{%elifrandevu.durum=='reddedildi'%}✗Reddedildi
{%elifrandevu.durum=='iptal'%}✗İptal
{%else%}⏱Beklemede{%endif%}
</span>
</div>

<divclass="randevu-details">
<divclass="detail-item">
👨‍🏫<strong>Öğretmen:</strong>{{randevu.ogretmen.unvan}}{{randevu.ogretmen.kullanici.get_full_name}}
</div>
<divclass="detail-item">
📅<strong>Tarih:</strong>{{randevu.tarih|date:"dFY,l"}}
</div>
<divclass="detail-item">
🕐<strong>Saat:</strong>{{randevu.baslangic_saati|time:"H:i"}}-{{randevu.bitis_saati|time:"H:i"}}
</div>
{%ifrandevu.ogretmen.ofis%}
<divclass="detail-item">
📍<strong>Ofis:</strong>{{randevu.ogretmen.ofis}}
</div>
{%endif%}
</div>

<divclass="randevu-subject">
<strong>📝Konu:</strong>{{randevu.konu}}
</div>

{%ifrandevu.aciklama%}
<divclass="randevu-description">
<strong>💬Açıklama:</strong>{{randevu.aciklama}}
</div>
{%endif%}

{%ifrandevu.durum=='bekliyor'%}
<divclass="action-buttons">
<formmethod="POST"action="{%url'randevu-yonetim'%}"style="flex:1;">
{%csrf_token%}
<inputtype="hidden"name="randevu_id"value="{{randevu.id}}">
<inputtype="hidden"name="action"value="onayla">
<buttontype="submit"class="btn-approve">✓Onayla</button>
</form>
<formmethod="POST"action="{%url'randevu-yonetim'%}"style="flex:1;">
{%csrf_token%}
<inputtype="hidden"name="randevu_id"value="{{randevu.id}}">
<inputtype="hidden"name="action"value="reddet">
<buttontype="submit"class="btn-reject"onclick="returnconfirm('Burandevuyureddetmekistediğinizeeminmisiniz?')">✗Reddet</button>
</form>
</div>
{%endif%}
</div>
{%endfor%}
{%else%}
<divclass="empty-state">
<divclass="empty-state-icon">📅</div>
<h3style="font-size:20px;color:#333;margin-bottom:8px;">HenüzRandevuYok</h3>
<p>Sistemdekayıtlırandevubulunmuyor.</p>
</div>
{%endif%}
</div>
</div>
{%endblock%}
